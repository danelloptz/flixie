# Глоссарий терминов
1. Предложение - фильм или сериал, которые пользователь видит у себя на экране в процессе выбора.
2. Сессия - непосредственно сам процесс выбора фильма/сериала группой лиц.
3. Мэтч - совпадение предложений у всех пользователей.
4. Пользователь – зарегистрированный посетитель сервиса.

# Модели требований
## Предметная область
### Объекты предметной области
1. Пользователь - зарегистрированный посетитель сервиса. 
2. Регистрация и авторизация - процесс идентификации пользователя в системе. 
3. Стартовый экран - главная страница приложения
4. Создание сессии - процесси формирования новой сессии, задание настроек сессии и приглашение друзей в неё. 
5. Сессия выбора - процесс выбора фильма/сериала участниками сессии. 
6. Друзья - страница в приложении, на которой отображаются все пользователи связанные с текущим. 
7. Уведомления - оповещение о новом действии внутри приложения (заявка в друзья, добавление в сессию) либо информационное сообщение. 
8. Настройки - управление личными данными пользователя и параметрами приложения. 
### Связи между объектами
![Схема](pngs/models.png)

## Модели пользователей системы
### Список пользователей
1. Пользователь - зарегистрированный посетитель сервиса. 
2. Гости - посетители сервиса, которые не подтвердили почту. 
### Права пользователей
Пользователь может:
1. **Регистрация и авторизация**
- Зарегистрироваться/авторизоваться с использованием логина и пароля
- Зарегистрироваться/авторизоваться с использованием стороннего сервиса авторизации через OAuth Google
- Подтвердить свою почту, открыв сообщение с подтверждением на своей почте. 
![Регистрация и авторизация](pngs/sequence_auth.png)
2. **Друзья**
- Перейти на страницу друзей. 
- Просматривать уже добавленных друзей
- Добавлять друзей по нику или id
- Приглашать своих друзей присоединиться к сессии
![Друзья](pngs/sequence_friends.png)
3. **Сессии**
- Выбрать доступную сессию и перейти в её интерфейс. 
- Создать новую сессию. 
- Задать имя сессии и период ее жизни
- Управлять параметрами поиска фильма (жанр, возрастные ограничения и т.д.)
- Начать сессию
- Просматривать предложения и их подробную информацию во время сессии. 
- Взаимодействовать с карточкой фильма:        
    * Смахнуть влево -> фильм интересен           
    * Смахнуть вправо -> фильм не интересен            
    * Нажать на карточку фильм / смахнуть вверх -> посмотреть более подробную информацию о фильме         
- Увидеть мэтч. 
![Сессии](pngs/sequence_sessions.png)
4. **Настройки**
- Перейти на страницу с настройками. 
- Изменить личную информацию в настройках. 
![Настройки](pngs/sequence_settings.png)
5. **Уведомления**
- Перейти на страницу уведомлений. 
- Просматривать уведомления о произошедшем за время его отсутствия мэтче
- Нажатие на это уведомление о мэтче демонстрирует информацию о выбранном фильме
- Просматривать уведомления о запросе в друзья
- Нажатием на уведомление о запросе в друзья он может принять или отклонить приглашение
- Просматривать уведомления о присоединении к сессии
- Нажатием на уведомление о присоединении к сессии он может принять или отклонить приглашение
![Уведомления](pngs/sequence_notifications.png)

# Первичный список требований
## Функциональные требования
1) Регистрация/авторизация
  - 1.1 Пользователь может зарегистрироваться/авторизоваться с использованием логина и пароля
  - 1.2 Пользователь может установить фотографию профиля 
  - 1.3 Пользователь может выбрать любимые жанры фильмов
  - 1.4 Пользователь может зарегистрироваться/авторизоваться с использованием стороннего сервиса авторизации через OAuth (Google)
  - 1.5 Пользователь может подтвердить почту в сообщении, которое придет ему на почту
2) Главная страница (меню)
  - 2.1 Пользователь может выбрать доступную сессию и перейти в [интерфейс сессии](#session-page)
  - 2.2 Пользователь может перейти на [страницу настроек](#settings-page)
  - 2.3 Пользователь может перейти на страницу [создания сессии](#create-session-page)
  - 2.4 Пользователь может перейти на [страницу друзей](#friends-page)
  - 2.5 Пользователь может перейти на [страницу уведомлений](#notification-page)
3) Создание сессии <a id="create-session-page"></a>
  - 3.1 Пользователь может создать новую сессию
  - 3.2 Пользователь может задать имя сессии и период ее жизни
  - 3.3 Пользователь может приглашать своих друзей присоединиться к сессии
  - 3.4 Пользователь может управлять параметрами поиска фильма (жанр, возрастные ограничения, ...)
  - 3.5 Пользователь может закончить настройку сессии с последующим ее началом
4) Страница сессии <a id="session-page"></a>
  - 4.1 Пользователь видит поверхностную информацию о фильме
  - 4.2 Пользователь может cмахнуть карточку фильма влево, если фильм интересен
  - 4.3 Пользователь может смахнуть карточку фильма вправо, если фильм не интересен
  - 4.4 Пользователь может нажать на карточку фильма или смахнуть вверх, чтобы посмотреть более подробную информацию о фильме
  - 4.5 Пользователь может наблюдать событие Match, если получилось определить идеальный фильм
5) Страница настроек <a id="settings-page"></a>
  - 5.1 Пользователь может изменить (привязать) электронную почту к аккаунту
  - 5.2 Пользователь может изменять личную информацию
6) Страница друзей <a id="friends-page"></a>
  - 6.1 Пользователь может просматривать уже добавленных друзей
  - 6.2 Пользователь может добавлять друзей по нику или id
  - 6.3 Пользователь может приглашать друзей
7) Страница уведомлений <a id="notification-page"></a>
  - 7.1 Пользователь может просматривать уведомления о произошедшем за время его отсутствия событии Match
  - 7.2 Нажатие на это уведомление демонстрирует информацию о выбранном фильме
  - 7.3 Пользователь может просматривать уведомления о запросе в друзья
  - 7.4 Нажатием на соответсвующие кнопки он может принять или отклонить приглашение
  - 7.5 Пользователь может просматривать уведомления о присоединении к сессии
  - 7.6 Нажатием на соответсвующие кнопки он может принять или отклонить приглашение

## Ограничения:
### Средства разработки:

**Backend:**
- Язык программирования: Python.
- Веб-фреймворк: FastAPI.
- ORM: SQLAlchemy.
- Валидация данных: Pydantic.
- База данных: PostgreSQL.
- Аутентификация: JWT + OAuth2 (Google).
- Документация API: автоматически генерируется через Swagger UI / ReDoc.

**Frontend:**
- Фронтенд-фреймворк: Vue.js
- Язык: JavaScript
- Стилизация: CSS
- Роутинг: Vue Router
- Управление состоянием: Vuex
- HTTP-клиент: Axios
- Формат приложения: PWA (Progressive Web App) 

**Инструменты и инфраструктура:**
- Система контроля версий: Git (хостинг: GitHub).
- Контейнеризация: Docker.
- CI/CD: GitHub Actions.
- Тестирование: pytest для backend, jest для frontend

---

### Безопасность и доступ:

- Доступ к функционалу приложения **требует авторизации и подтверждённой электронной почты**.  
  → Гости (пользователи, не подтвердивший email) имеют доступ **только к профилю и настройкам** — с возможностью отправки письма подтверждения.  
  → Все остальные функции (создание/участие в сессиях, добавление друзей, просмотр фильмов) **заблокированы** до подтверждения почты.

- Используется схема аутентификации на основе **JWT с access и refresh токенами**:
  - **Access-токен** — срок жизни **15 минут**, используется для авторизованных запросов к API.
  - **Refresh-токен** — срок жизни **7 дней**, используется для получения новой пары токенов без повторного ввода логина/пароля.
  - Оба токена **деактивируются** при:
    - Явном выходе из аккаунта (logout).
    - Смене пароля.

- Пароли хранятся в базе данных в **хешированном виде с использованием bcrypt**.

- OAuth-авторизация поддерживается **только через Google**.  

- Роли пользователей:

  - **Неавторизованный пользователь**  
    1. **Доступ запрещён полностью.**  
    2. Любая попытка открыть приложение перенаправляет на страницу входа/регистрации.  
    3. Главная страница недоступна без авторизации.

  - **Гость (email не подтверждён)**  
    1. Пользователь прошёл регистрацию, но **ещё не подтвердил email**.  
    2. Получает **ограниченный доступ только к разделу «Настройки профиля»** с возможностью:  
      ✓ Просматривать и редактировать свой email.  
      ✓ Запрашивать повторную отправку письма подтверждения.  
      ✓ Выходить из аккаунта.  
    3. **Все остальные разделы (сессии, друзья, фильмы, уведомления) — заблокированы.**  
    4. В интерфейсе отображается баннер с напоминанием подтвердить почту.

  - **Пользователь (email подтверждён — базовая роль)**  
    1. После подтверждения email — автоматически получает **полный доступ ко всем функциям**:  
      ✓ Создание и управление сессиями.  
      ✓ Участие в выборе фильмов (свайпы, мэтчи).  
      ✓ Добавление, просмотр и управление друзьями.  
      ✓ Настройки профиля, уведомлений, безопасности.  
      ✓ Просмотр уведомлений.  
    2. Это основная рабочая роль для всех активных пользователей.

---

### Требования к системе (интерфейсу):

1.  Пользовательский интерфейс доступен **только на русском языке**.
2.  Приложение реализовано как **PWA** — должно корректно работать на мобильных устройствах (iOS/Android) и поддерживать установку на домашний экран.
3. Поддерживаемые браузеры (последние версии на момент релиза):
  - Google Chrome
  - Yandex Browser
  - Safari (iOS)
  - Microsoft Edge
  - Firefox (опционально)

4. Архитектура frontend — компонентная (Vue 3), backend — REST API с четким разделением слоёв.
5. При регистрации:
  - Логин: от 3 до 30 символов.
  - Пароль: от 8 до 64 символов.
6. Пользователь может создать **не более 5 активных сессий одновременно**.
7. В одной сессии может участвовать **не более 10 пользователей**.
8. Пользователь может иметь **не более 200 друзей**.
10. Поиск фильмов фильтруется по жанрам, рейтингу, году выпуска.
11. Интерфейс карточки фильма поддерживает свайпы (влево — «интересно», вправо — «не интересно», вверх — детали).
12. Push-уведомления о событиях Match, приглашениях в друзья и сессии.

---

## Дополнительные технические требования:
- Backend должен быть stateless — вся сессионная логика хранится в БД.
- Все изображения и тяжелые ресурсы должны лениво подгружаться (lazy load).
- Приложение должно быть отзывчивым (responsive) — корректно отображаться на экранах от 320px по ширине.

---

## Функциональная модель
Сценарий 1: Вход в систему с использованием валидного логина и пароля (ФТ №1.1)
1) Пользователь вводит валидные данные логина и пароля. 
2) Пользователь нажимает кнопку "Войти". 
3) Пользователь успешно проходит авторизацию и попадает на главный экран приложения. 

Сценарий 2: Вход в систему с использованием невалидного логина и пароля (ФТ №1.1)
1) Пользователь вводит невалидные данные логина и пароля. 
2) Пользователь нажимает кнопку "Войти". 
3) Пользователь видит сообщение о том, что данные введены неправильно. 

Сценарий 3: Регистрация с использованием логина и пароля. Общий сценарий. (ФТ №1.1)
1) Пользователь вводит данные для входа: логин и пароль
2) Пользователь вводит повторно пароль и нажимает кнопку "Продолжить". 
3) Пользователь вводит личную информацию: Имя и фамилию, возраст, пол. электронную почту и нажимает кнопку "Продолжить". 
4) Пользователь загружает фотографию профиля или пропускает этот этап и нажимает кнопку "Пропустить". 
5) Пользователь видит загруженную фотографию. Одобрить - нажимает кнопку "Продолжить", загрузить другую фотографию - нажимает кнопку "Загрузить другую фотографию". 
6) Пользователь выбирает любимые жанры. 
7) Пользователь нажимает кнопку "Завершить" и попадает на главную страницу. 

Сценарий 4: Регистрация. Выбор фотографии профиля не прывышающей допустимого размера (ФТ №1.2)
1) Пользователь нажимает на поле для добавления изображения. 
2) Открывается окно с выбором изображения из файловой системы пользователя. 
3) Пользователь выбирает изображение не превыщаещее допустимого размера. 
4) Изображение появляется на экране пользователя в форме круга. 

Сценарий 5: Регистрация. Выбор фотографии профиля прывышающей допустимый размера (ФТ №1.2)
1) Пользователь нажимает на поле для добавления изображения. 
2) Открывается окно с выбором изображения из файловой системы пользователя. 
3) Пользователь выбирает изображение превыщаещее допустимый размер. 
4) Появляется сообщение о превышении допустимого размера и поле для повторного добавления изображения. 

Сценарий 6: Регистрация. Пользователь выбирает любимые жанры фильмов (ФТ №1.3)
1) Пользователь выбирает жанр фильма. 
2) Выбранный жанр становится активным. 
3) Пользователь выбирает другой жанр фильма. 
4) Выбранный жанр становится активным, при этом выбранные жанры до этого также остаются активным. 
5) Пользователь нажимает на активным жанр. 
6) Повторно нажатый жанр становится неактивным. 

Сценарий 7: Регистрация с использованием OAuth (ФТ №1.4)
1) Пользователь нажимает на кнопку "Использовать Google"
2) Открывается окно с подтверждением входа через Google. 
3) Открывается окно выбора жанров. 
4) Пользователь выбирает жанры. 
5) Пользователь нажимает кнопку "Завершить" и попадает на главную страницу. 

Сценарий 8: Авторизация зарегистрированного пользователя с использованием OAuth (ФТ №1.4)
1) Пользователь нажимает на кнопку "Использовать Google". 
2) Пользователь попадает на главную страницу. 

Сценарий 8: Авторизация незарегистрированного пользователя с использованием OAuth (ФТ №1.4)
1) Пользователь нажимает на кнопку "Использовать Google". 
2) Пользователь видит сообщение о том, что он не зарегистрирован и кнопку регистрации. 

Сценарий 9: Подтверждение почты (ФТ №1.4)
1) Пользователь открывает письмос подтверждением, которое пришло ему на почту, указанную при регистрации. 
2) Пользователь нажимает на ссылку в письме. 
3) Пользователь подтверждается и попадает на главную страницу. 

Сценарий 10: Открытие интерфейса сессии, которая уже запущена (ФТ №2.1)
1) Пользователь нажимает на элемент списка активных сессиий. 
2) Открывается интерфейс сессии: появляется карточка предложенного фильма. 

Сценарий 11: Открытие интерфейса сессии, которая создана, но не запущена (ФТ №2.1)
1) Пользователь нажимает на элемент списка активных сессиий. 
2) Открывается интерфейс создания сессии: настройки сессии и кнопка запуска сессии. 

Сценарий 12: Открытие страницы настроек (ФТ №2.2)
1) Пользователь нажимает на иконку "Настроек" в нижней панели экрана. 
2) Открывается страница "Настроек". 

Сценарий 13: Создание новой сессии (ФТ №2.3)
1) Пользователь нажимает на кнопку "Создать новую сессию" на главной странице. 
2) Открывается страница создания сессии. 

Сценарий 14: Открытие страницы друзей (ФТ №2.4)
1) Пользователь нажимает на иконку "Друзей" в нижней панели экрана. 
2) Открывается страница друзей. 

Сценарий 15: Открытие страницы уведомлений (ФТ №2.5)
1) Пользователь нажимает на иконку "Уведомлений" в верхней части экрана. 
2) Открывается страница уведолений. 


Сценарий 16: Создание новой сессии (ФТ №3.1)
1) Пользователь нажимает на кнопку "Создать новую сессию" на главной странице. 
2) Открывается страница создания сессии. 

Сценарий 17: Задание имени сессии и времени жизни (ФТ №3.2)
1) Пользователь вводит имя сессии в поле для ввода. 
2) Пользователь указывает время жизни: количество часов от 0 до 23
3) Пользователь указывает время жизни: количество минут от 0 до 59

Сценарий 18: Приглашение друзей в сессию (ФТ №3.3)
1) Пользователь видит список его друзей: фотографию профиля, имя и фамилию пользователя. 
2) Пользователь нажимает на друга, которого хочет добавить. 
3) Друг становится активным. 
4) Пользователь нажимает на активного друга и друг становится не активным. 
5) Пользователь нажимает "Создать" и отправляется приглашение в сессию выбранным друзьям. 

Сценарий 19: Настройка сессии (ФТ №3.4)
1) Пользователь может выбрать предпочтительные жанры фильмов для этой сессии. 
2) Пользователь может нажать на чекбокс "Использовать мои жанры", тогда в списке жанров отметятся те, которые выбранны у пользователя в настройках. 
3) Пользователь может нажать на чекбокс "Показывать контент 18+", чтобы включить фильмы с возрастным ограничением 18+ в список возможных фильмов. 
4) Пользователь может выбрать промежуток года выпуска фильма с помощью ползунков, где левый - указывает нижнюю границу года, а правый - верхнюю границу года. 
5) Пользователь может выбрать страну производтсва фильма, нажав на выпадающий список и выбрать там нужную страну. 

Сценарий 20: Запуск сессии (ФТ №3.5)
1) На этапе приглашения друзей пользователь нажимает кнопку "Создать". 
2) Сессия запускается. 
3) Пользователь попадает в интерфейс сессии: видит карточку предложенния. 

# Высокоуровневая архитектура
## Архитектура Frontend-Backend Separation
Приложение построено по принципу фронтенд-бэкенд разделения: Vue.js PWA (фронтенд) отвечает за UI/UX и взаимодействие с пользователем, а FastAPI (бэкенд) — за бизнес-логику, аутентификацию, работу с базой данных и интеграции, при этом обе части независимо разрабатываются и масштабируются, взаимодействуя исключительно через строго определённый REST API.

### Frontend:
1) **Модуль авторизации** - точка входа в приложение. Здесь реализованы формы входа через логин/пароль и через OAuth (Google). Также есть валидация введенных данных, обработка ответов от API. Сохраняются access/refresh токены и происходит редирект на главную страницу при успешной авторизации.
2) **Модуль регистрации** - пошаговое создание аккаунта пользователя: ввод логина/пароля, email, личных данных, загрузка изображения профиля и выбор любимых жанров. После завершения регистрации — вывод напоминания о необходимости подтвердить почту.
3) **Модуль настроек** - отвечает за управление профилем пользователя. Включает в себя изменение имени, почты, пароля, аватара, выбор/редактирование любимых жанров и подтверждение почты, если она не была подтверждена. 
4) **Модуль сессий** - модуль для работы с подбором фильмов. Позволяет создавать сессии, задавать фильтры (жанры, страна, год, рейтинг), приглашать друзей, запускать сессию. Отображает карточки фильмов и обеспечивает взаимодействие с ними (свайпы влево/вправо/вверх). Показывает мэтч, если найден общий фильм.
5) **Модуль уведомлений** - управляет заявками в друзья, приглашениями в сессии, и мэтчами. Просмотр деталей (например, фильма при мэтче) и возможность действия (принять/отклонить приглашение).
6) **Модуль друзей** - овтечает за управление социальными связями между пользователями, такими как: вывод списка друзей с их статусом дружбы, поиск среди пользователей по имени пользователя, добавление и удаление друзей, обработка входящих запросов в друзья.

### Backend:
1) **API Gateway** - выступает единственной точкой входа в бэкенд, принимая все HTTP-запросы от фронтенда (например, /api/auth/login, /api/sessions, /api/friends) и маршрутизируя их через зарегистрированные FastAPI роутеры к соответствующим модулям.
2) **Модуль авторизации и регистарции** - отвечает за безопасное управление идентичностью пользователей: он обрабатывает регистрацию новых аккаунтов через логин/пароль, аутентификацию существующих пользователей с выдачей JWT-токенов, привязку и обработку входа через сторонние OAuth-провайдеры (Google, VK), проверяет подтверждение электронной почты, управляет хранением хешированных паролей и токенами OAuth, а также обеспечивает защиту от несанкционированного доступа через валидацию.
3) **Модуль сессий** - отвечает за создание, управление и запуск сессий пользователей, обработку их голосов (лайк/дизлайк) за фильмы, определение события «Match» при совпадении выборов всех участников и взаимодействие с модулем подбора фильмов для получения актуальных кандидатов на основе заданных фильтров.
4) **Модуль управления профилем** — обрабатывает чтение и редактирование персональных данных пользователя: имя, аватар, привязку/отвязку email и OAuth-аккаунтов, обеспечивая согласованность данных между аутентификацией и интерфейсом.
5) **Модуль социальных взаимодействий** — управляет связями между пользователями: позволяет добавлять друзей по нику или ID, отправлять и обрабатывать запросы на дружбу, храня статус отношений и синхронизируя их с уведомлениями.
6) **Модуль подбора фильмов** — на основе фильтров сессии (жанр, возраст, язык) выбирает непросмотренные фильмы из БД, исключая уже оценённые пользователем, чтобы избежать повторов; в будущем будет расширен за счёт интеграции нейронной модели для персонализированного ранжирования на основе поведения пользователей.
7) **Модуль уведомлений** — централизованно генерирует, хранит и доставляет события (Match, приглашения в сессию, запросы в друзья, подтверждение почты) через Push, email и UI, получая триггеры от других модулей и обеспечивая асинхронную коммуникацию с пользователем.
![Высокоуровневая архитектура](pngs/arch.png)

## Требования к основным подсистемам
### Frontend
#### Модуль авторизации и регистрации
1) Отображение интерфейса регистрации/авторизации. Валидация введенных данных, вывод сообщений при неверных данных, сохранение access/refresh токенов и редирект на главную страницу(ФТ № 1.1)
2) Вызов эндпоинтов для регистрации и авторизации через логин/пароль (ФТ № 1.1)
3) Открытие окна для выбора фотографии профиля с устройства пользователя (ФТ № 1.2)
4) Валидация загруженного изображение по максимальному допустимому объёму (ФТ № 1.2)
5) Вывод списка возможных жанров и возможность отметить несколько жанров одновременно, при этом выделив их от других визуально (ФТ № 1.3)
6) Вывод кнопки "Вход через Google", вызов эндпоинта для авторизации/регистрации через OAuth, сохранение access/refresh токенов и редирект на главную страницу (ФТ № 1.4)

#### Модуль сессий
1) Отображение главной страницы с списком активным сессий и кнопкой "Создать новую сессию" (ФТ № 2.1)
2) Отображение интерфейса страницы создания новой сессии (ФТ № 3.1)
3) ....

### Backend
#### Модуль авторизации и регистарции:
1) Обработка запросов на регистрацию и авторизацию по логину/паролю с валидацией данных. (ФТ № 1.1)
2) Поддержка OAuth-авторизации через Google и VK: получение токена от провайдера, привязка к существующему или создание нового аккаунта. (ФТ № 1.4)
3) Отправка email-письма с уникальной ссылкой для подтверждения адреса при регистрации. (ФТ № 1.5)
4) Обновление аватара профиля пользователя: приём изображения, сохранение ссылки на хранилище, обновление записи в БД. (ФТ № 1.2)
5) Сохранение и обновление выбранных любимых жанров фильмов пользователя. (ФТ № 1.3)
6) Обновление привязанного email-адреса пользователя с подтверждением через повторную отправку письма. (ФТ № 5.1)
7) Обновление личной информации пользователя (имя, никнейм и т.п.) с валидацией. (ФТ № 5.2)

#### Модуль сессий:
1) Создание новой сессии с заданным именем и сроком жизни (дата окончания). (ФТ № 3.1, 3.2)
2) Привязка сессии к создателю и хранение параметров поиска (жанры, возрастные ограничения и др.). (ФТ № 3.4)
3) Отправка уведомлений приглашений друзьям по их ID/нику и фиксация статуса приглашения (“ожидает”, “принято”, “отклонено”). (ФТ № 3.3)
4) Проверка прав доступа: пользователь может взаимодействовать только со своими сессиями или сессиями, в которых он участник. (ФТ № 2.1, 4.1)
5) Завершение настройки сессии и её переход в активное состояние с генерацией уникального ID для интерфейса. (ФТ № 3.5)

#### Модуль подбора фильмов:
1) Получение списка подходящих фильмов на основе параметров сессии (жанр, возраст, популярность). (ФТ № 4.1)
2) Обработка действий пользователя: свайп влево (“интересно”), вправо (“не интересно”), клик (“подробнее”). (ФТ № 4.2, 4.3, 4.4)
3) Определение события “Match” при совпадении предпочтений двух и более участников сессии — фиксация фильма как общего выбора. (ФТ № 4.5)
4) Отправка уведомления всем участникам сессии при наступлении Match. (ФТ № 7.1, 7.3)

#### Модуль социальных взаимодействий:
1) Получение списка друзей текущего пользователя. (ФТ № 6.1)
2) Поиск пользователей по нику или ID для добавления в друзья. (ФТ № 6.2)
3) Отправка и обработка запросов на добавление в друзья: сохранение статуса “ожидает”, уведомление получателя. (ФТ № 6.3, 7.3)
4) Обработка принятия/отклонения приглашения в друзья с обновлением статуса у обоих участников. (ФТ № 7.4)
5) Добавление пользователя в сессию после принятия приглашения — обновление списка участников. (ФТ № 7.5, 7.6)

#### Модуль управления профилем:
1) Обеспечение чтения и редактирования персональных данных пользователя: имя, никнейм, почта. (ФТ № 5.2)
2) Обновление аватара профиля: приём изображения, сохранение ссылки, обновление записи в профиле. (ФТ № 1.2)
3) Привязка и отвязка email-адреса с подтверждением через одноразовую ссылку в письме. (ФТ № 1.5, 5.1)
4) Отвязка OAuth-аккаунта без удаления основного профиля — только снятие привязки, сохранение логина/пароля как альтернативного способа входа. (ФТ № 1.4)
5) Синхронизация данных между системой аутентификации и профилем: при изменении имени или аватара — обновление во всех связанных контекстах (сессии, уведомления, друзья). (ФТ № 1.2, 1.3, 5.2)

#### Модуль уведомлений:
1) Генерация и доставка уведомлений для пользователя:
  - о событии Match (ссылка на фильм). (ФТ № 7.1, 7.2)
  - о запросе в друзья. (ФТ № 7.3, 7.4)
  - о присоединении друга к сессии. (ФТ № 7.5, 7.6)
2) Пометка уведомлений как “прочитанных” при открытии страницы уведомлений.
3) Возврат списка уведомлений по ID пользователя с фильтрацией по типу и времени. (ФТ № 7.1–7.6)

#### API Gateway:
1) Предоставление RESTful API для всех вышеуказанных функций: GET, POST, PUT, DELETE.
2) Обеспечение аутентификации каждого запроса через Bearer Token (JWT).
3) Валидация входных данных (email, ID, названия, даты) перед записью в БД.
4) Логирование ключевых действий: вход, создание сессии, match, добавление друга.
5) Обеспечение CORS-совместимости для взаимодействия с фронтендом.