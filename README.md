![Flixie](public/img/icons/android-chrome-192x192.png)
# Flixie

## Самый главный вопрос: почему Flixie? 
“flicks” (фильмы) + суффикс.
> типа модно-молодёжно, слэнг, все дела, лол кек

## Термины
Здесь я укажу условные обозначения, которые я буду использовать в документации для краткости и ясности.        
<ins>_Предложение_</ins> - фильм или сериал, которые пользователь видит у себя на экране в процессе выбора.         
<ins>_Сеанс _</ins> - непосредственно сам процесс выбора фильма/сериала группой лиц.        
<ins>_Мэтч_</ins> - совпадение предложений у всех пользователей.          


## Платформа для приложения. 
Составляющие приложения:        
- **Лендинг** на главном домене сайта (например <ins>flixie.io</ins>). На самом лендинге представлена основная информация о сервисе. Подробнее о структуре лендинга в соответствующей главе. 
- **Сайт с приложением**. Находится на поддомене сервиса (например <ins>app.flixie.io</ins>). Web-версия и посовместительству десктоп версия для пользователей. 
- **PWA-приложение**. По сути весь сервис только в формате приложения. Работает как сайт внутри приложения, открывается браузерами на устройствах, но визуально кажется, что это отдельное мобильное приложение. Может быть установлено как на мобильные, так и на десктопные устройства. Но преимущественно люди будут им пользоваться на телефонах. Отдельная разработка под pwa не требуется. Приложение создается и обновляется при билдинге сайта. Если мы захостили сайт на домен и пользователь скачал себе pwa-приложение, то все обновления будут автоматически ему подтягиваться. Для использования pwa приложения обязателен интернет. Если у пользователя нет интернета, то надо выводить ему об этом информацию.  Я уже сделал hello world на vue на pwa. Работает четко на телефоне и на маке, как отдельное приложение. Так что у нас еще и на все операционки будет, т.е закрываем таким образом вопрос одновременной разработки под андроид и айос. 

## Какие проблемы решает приложение?
Многие люди сталкиваются с проблемой выбора фильма или сериала для совместного просмотра. У каждого человека свои вкусы и не всегда легко прийти к общему решению. 

## Целевая аудитория
Пары, семьи, группы друзей и другие компании. То есть группы людей от 2 человек и больше. 

## Концепция приложения 
Пользователю бесконечно предлагаются фильмы и сериалы на основе его предпочтений. Пользователь отмечает каждое предложение как «понравившееся» либо «непонравившееся». Это происходит путем свайпа влево (понравилось) и вправо (не понравилось). UX похожий на приложения для знакомств (tinder). Группа лиц запускает «сеанс» и в live режиме просматривает «предложения». В тот момент, когда у всех пользователей произойдет «мэтч», «сеанс» останавливается и пользователи видят итоговый вариант. Подробнее о функционале приложения в соответствующей главе. 

## Функционал приложения
### 1. Авторизация и регистрация. 
Два пути: своя либо интегрируем через сторонние сервисы (vk, google). С первым уже есть опыт работы - неоднозначный (хотя бы если брать токены), но какой-никакой. Делать разлогинивание не будем, т.к это не юзер френдли постоянно вводить данные для авторизации (даже и раз в какой-то промежуток), секретного у нас ничего нет. Если своя рега, то для аунтефикации используем юзернейм+пароль. В процессе регистрации есть необязательный шаг - заполнение личной информации. Если пользователь его не заполнит сразу, то можно это сделать позднее в настройках. Информация для заполнения: фамилия_имя, возраст, пол, аватарка, предпочтения по жанрам фильмов/сериалов, что предпочитает больше - фильмы или сериалы. 
### 2. Добавление пользователей в друзья. 
Для того чтобы запускать «сеансы» и приглашать в них других людей, пользователь предварительно должен добавить их в друзья. Должен быть поиск по юзернеймам либо именам пользователей. Показывать в поиске только тех людей, у которых в настройках приватности не включено ограничение на поиск. Если пользователь найден, то должна быть возможность отправить ему запрос на добавление в друзья. В поиске, если найден пользователь, должна показываться краткая информация о нём: аватарка, никнейм, имя_фамилия.  Пользователю, которому отправили запрос в друзья, придет уведомление об этом с опциями «добавить»/«отклонить». Если пользователь одобрил запрос, то теперь они стали друзьями в разделе «Друзья» они будут показываться друг у друга в списке «Добавленные». 
Подумать: на сколько открытым делать поиск? Стоит ли как в соцсетях в формате автодополнения показывать всех пользователей с похожими никами, либо сделать строгий поиск по юзернейму - есть/нет. 

#### 3. «Сеансы»
##### 3.1 Приглашение друзей в «сеанс». 
У пользователя открывается окно с его друзьями: выводится аватарка, фамилия_имя и кнопка пригласить. Пользователь выбирает всех друзей и затем нажимает «Начать сеанс». После этого всем пользователям отправляются уведомления о приглашении в «сеанс». В приглашении у них есть две опции: принять и отклонить. У админа - пользователя, который запускал «сеанс», пока люди отмечаются, висит список всех приглашенных и их статус - принято или отклонено. Когда все пользователи проголосуют, начинается сам «сеанс» на количество людей, проголосовавших «принять». 

##### 3.2 Концепция live-сеанса, проблема: как группе пользователей находится в лайве и синхронно получать информацию. 
Пока хз, надо думать. 

##### 3.3 Настройки сеанса: фильтры на выдачу «предложений». 
Фильтры:
- жанры
- возрастное ограничение
- страна производства (автоматически определять местоположение пользователя и его страну,  чтобы была опция «моя страна»)
- год производства

##### 3.4 Предпочтения пользователя. Выдача «предложений» на основе фильтров и предпочтений пользователя. 
Надо думать. 

##### 3.5 Предложение. 
На весь экран у пользователя обложка «предложения», название «предложения», год выпуска, жанры фильма, оценка, описание (первые N-символов). В низу есть стрелка внизу, чтобы раскрыть информацию. Там будет полное описание к фильму и трейлер. Также добавить кнопку «Посмотрел фильм». Если нажать на неё, то фильм добавится пользователю в раздел «Просмотренные фильмы». 

##### 3.6 Отметка «предложения» - понравилось/не понравилось. 
Пользователь свайпает влево, если «предложение» ему понравилось. Тогда это «предложение» отмечается у этого пользователя как понравившееся. Если не понравилось, то тоже отметить, как непонравившееся, это нужно для системы рекомендаций. 

##### 3.7 «Мэтч» и вывод информации об этом. 
Должен крутится какой-то фоновый процесс, который отслеживает «мэтч» по всем пользователям. Можно хранить у каждого пользователя айдишники «предложений» и когда будет «мэтч», отправить сигнал об этом. У всех пользователей появится на экране уведомление об итоговом выборе: баннер «предложения», название «предложения», год выпуска, жанры фильма, оценка. 

##### 4. Настройки. 
Персональные данные:        
- имя фамилия
- возраст
- пол
- аватарка
- предпочтение по жанрам
- любимые актёры и продюссеры

Конфидециальность:        
- переключатель «показывать меня в поиске»
- переключатели на персональные данные (показывать или нет для других пользователей)

### 5. Уже просмотренные фильмы. 
В самом верху находится поиск по фильмам и сериалам. Должно быть автоподсказка при вводе, чтобы полностью не писать. Если нажать на фильм, который появляется при вводе, то он отмечается как просмотренный и добавляется в историю. 
Под строкой поиска находится сама история. Это список всех просмотренных фильмов и сериалов. Отдельный фильм или сериал - это строка, в которой есть баннер фильма, его название, год выпуска и кнопка удалить. Если нажать на какой-то фильм, то откроется карточка с описанием всего фильма (такая же, как и в «предложении» во время «сеанса»). Также вверху должна быть кнопка «Очистить историю». 

### 6. Уведомления. 
На мобильных устройствах сделать отдельным экраном, на декстопе - модальное окошко рядом с иконкой уведомлений. Уведомления просто показываем списком: дата уведомления (сейчас, сколько-то минут, часов, дней назад). Подумать, будем ли хранить и показывать все уведомления. Если будем удалять уведомления, то можно не писать фоновый процесс, а например в ручке на получение смотреть даты уведомлений и удалять например если больше 5 дней. В уведомления будет приходить вся информация: заявки в друзья, приглашения в сеанс, общие уведомления и тд. 

### 7. Друзья. 
Принцип работы этого раздела описан в функциональном разделе. Два раздела, переключатель между ними в верху (как в вк): «добавленные» и «запросы».         
**В разделе «добавленные»:**       
Сверху строка поиска по пользователям. Если нажать на пользователя, то появляется его карточка и кнопка «Добавить в друзья». Под строкой поиска находится список друзей и их число: аватарка, имя_фамилия, никнейм, кнопка удалить. При нажатии на пользователя появляется карточка пользователя.        
**В разделе «запросы»:**        
Список всех пользователей, которые подали заявку в друзья, и их число. Аватарка, имя_фамилия, никнейм. Две кнопки: принять и отклонить. При нажатии на пользователя, открывается его карточка.         

## По поводу архитектуры и в целом устройства работы:
Фронт и бэк пишем в своих докерах, чтобы легко потом носить их.         
Фронт на **vue 3**. Бэк судя по всему **Go**, ну либо как вы там решите.          
Архитектуру сервера можно стырить с интелектаза, вроде как там неплохо всё сделано. Плюс хотелось бы нам **directus** накатить на бд, чтобы админить легко было, очень удобная штука.           

Эндпоинты оформляем в **сваггерах** (у каждого отдельный). К каждой ручке в сваггере пишем **описание**, что это и для чего, если надо, то еще какую-то доп инфу (потому что когда эндпоинтов станет много, начнем путаться). Ну и **пути** к эндпоинтам тоже как-то логично оформляем.           

Для контроля поставленных задач будем использовать либо **миру** (которую Саня кидал), либо **яндекс трэккер** (хз как мира пойдет, но яндекс трекер очень удобный, на интелектазе мы его юзали).  **ВСЕ** задачи пишем туда, это прям **ОБЯЗАТЕЛЬНО**, даже самые маленькие. Потому что опыт интелектаза показал, что просто написать в тг сообщение «сделать то-то» мало, мы просто забываем про это и потом не делаем.           

Когда уже полноценно начнём работать, то сделать **1-2 раза в неделю созвон**. Вот прям выделить день и время на неделе, в который мы всегда будем подключаться и делать общее ревью - что вообще сделали за неделю, поставить какие-то задачи на следующую неделю(-ли). Больше несет в себе организационные момент, чтобы мы не втыкали и стабильно двигались. Плюс уровень уже будет, типа мы крутые такие. И вроде как на ТППО есть какой-то график, когда команда собиралась вместе для обсуждения.             

Также стараемся писать **тесты** на модули/ручки, которые пишем. Это также для ТППО нужно, плюс элементарно контроль качества и уровень проекта. Понятно, что не весь код можно модульно протестировать, но по возможности пишем. На бэке с этим попроще, а на фронте будет больше аттестационных тестов, я их наверное буду текстом писать, как на ОРПО делали.  Не забывать запускать тесты при коммитах.         

Надо бы вести **техническую документацию** какую-то. Как минимум по развертыванию системы и тому подобному. Также впринципе по модулям, которые у нас есть. Во всех крупных компаниях такая штука есть и нам не помешает.           

Код обязательно **комментим**, не каждую строчку, а нормально, по делу. Так, чтобы другим тоже понятно было. И ко всем функциям писать **описание**, хотя бы краткое, о чем, зачем и почему (как раз в сваггер пойдет).           

Нужно подумать по поводу **сервера** для этапа разработки. Потому что локально не вариант, но и платить большие деньги за полноценный серв тоже не тема. Так что надо найти что-то бюджетное (у нас с Гошей была идея купить серв под впн, так что мб объединить эти две функции, и тогда уже будет смысл платить за это). Также нужно подумать насчёт того, как мы после деплоя будем делать **два серва**. Сейчас я подразумеваю, что на деплой мы купим нормальный серв и сделаем его основным, туда будем пушить только рабочие обновы, а писать новый код, тестить будем на втором серве - на котором мы работали изначально.           

**Гит** на фронт есть. На бэк обсудите - один у вас будет, или раздельный. Хотел бы попробовать нормально сделать архитектуру веток в гите. Т.е чтобы была **master** и **dev** ветка хотя бы. Потому что лично меня уже начинает бесить, когда среди коммитов ищешь рабочие версии. Ну и понятно, что в мастер пушим только протестированные рабочие версии, чтобы можно было безопасно откатываться.          

По направлениям разработки:        
**Даня** - фронт, дизайн, ПМ (😎);        
**Саня** - бэк, бд, фоновые процессы;          
**Гоша** - бэк, ML;         
(ну тут по обязанностям еще обсудим, я вам пока от балды написал)                 
По поводу дизайна: понятно, что я не дизайнер, так что начинать будем с чего-то убогого, по ходу разработки скорее всего будем дорабатывать дизайн, мб у кого-то будут свои идеи, всё сделаем. Также у меня была мысль найти какого-то дизайнера, который также чисто на энтузиазме будет готов залететь к нам. Та же Лена с нашей группы, хз кто она, но вроде чем-то похожим занимается. Мб если она такое умеет, то в команду тоже взять, она как раз себе ТППО сможет закрыть.           

На этапе проектирования надо максимально продумать всё что можно и нельзя продумать, начиная с проектирования, заканчивая деплоем. Сейчас надо подробно расписать все разделы и их функционал. Этим буду я заниматься. Вам же надо будет относительно этого проектировать свой бэк и бд.           
Я постараюсь нарисовать, хотя бы примерно, экраны приложений, чтобы было понятно, что и где.           
**ОЧЕНЬ ВАЖНО:** нужно расписать функционал в виде блок-схем. Например «создание сеанса»: выбор настроек -> отправка приглашений друзьям -> ……. Только подробнее и уже прикидываем относительно взаимодействия фронт <-> бэк <-> бд. Долгая и муторная работа, рисовать все эти прямоугольнички, стрелочки, но очень важная. Отмучимся сейчас, но зато потом будет понятно, что делать. Перед глазами будет вся архитектура и уже сейчас, на этапе проектирования, мы сможем максимально продумать все моменты (нам с Сашей не понравилось на ходу придумывать архитектуру для ии генератора).             

Также у нас есть открытые вопросы:        
-  Датасет фильмов и сериалов. Надо подумать, откуда мы их вообще возьмём, чтобы себе базу заполнить ими. А также как отслеживать новинки киноиндустрии и соответственно вносить их себе в базу;
- Авторские права. Сами фильмы мы показывать не будем, но все равно надо почитать, что можно и нельзя показывать без всяких лицензий;
- live-сеансы, чтобы группа пользователей, была как в онлайн игре;          
         

Заметки, чтобы запомнить:
- …..
